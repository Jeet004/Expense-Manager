<div class="container mt-5">
    <div class="row">
        <div class="col-12">
            <h1 class="text-center mb-4">Dashboard</h1>
        </div>
    </div>
    
    <div class="row">
        <!-- Total Income -->
        <div class="col-md-4 mb-4">
            <div class="card card-summary card-income text-white">
                <div class="card-body d-flex justify-content-between align-items-center">
                    <div>
                        <h5 class="card-title">Total Income</h5>
                        <p class="card-text fs-4 fw-bold">$<%= (typeof income !== 'undefined' ? income : 0).toFixed(2) %></p>
                    </div>
                    <i class="bi bi-piggy-bank" style="font-size: 3rem;"></i>
                </div>
            </div>
        </div>
        <!-- Total Expense -->
        <div class="col-md-4 mb-4">
            <div class="card card-summary card-expense text-white">
                <div class="card-body d-flex justify-content-between align-items-center">
                    <div>
                        <h5 class="card-title">Total Expense</h5>
                        <p class="card-text fs-4 fw-bold">$<%= (typeof expenses !== 'undefined' ? expenses : 0).toFixed(2) %></p>
                    </div>
                    <i class="bi bi-credit-card-2-front" style="font-size: 3rem;"></i>
                </div>
            </div>
        </div>
        <!-- Balance -->
        <div class="col-md-4 mb-4">
            <div class="card card-summary card-balance text-white">
                <div class="card-body d-flex justify-content-between align-items-center">
                    <div>
                        <h5 class="card-title">Balance</h5>
                        <p class="card-text fs-4 fw-bold">$<%= (typeof balance !== 'undefined' ? balance : 0).toFixed(2) %></p>
                    </div>
                    <i class="bi bi-wallet2" style="font-size: 3rem;"></i>
                </div>
            </div>
        </div>
    </div>

    <form method="GET" action="/" class="mb-4">
        <div class="row align-items-end">
            <div class="col-md-4">
                <label for="startDate" class="form-label">Start Date:</label>
                <input type="date" name="startDate" id="startDate" class="form-control">
            </div>
            <div class="col-md-4">
                <label for="endDate" class="form-label">End Date:</label>
                <input type="date" name="endDate" id="endDate" class="form-control">
            </div>
            <div class="col-md-4">
                <button type="submit" class="btn btn-primary w-100 mt-3">Filter</button>
            </div>
        </div>
    </form>

    <div class="row">
        <div class="col-12">
            <h2 class="mt-5">Transaction History</h2>
            <table class="table table-bordered mt-3">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Type</th>
                        <th>Amount</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <% if (transactions.length === 0) { %>
                        <tr>
                            <td colspan="6" class="text-center">No transactions found for the selected date range.</td>
                        </tr>
                    <% } else { %>
                        <% transactions.forEach(function(transaction) { %>
                            <tr>
                                <td><%= new Date(transaction.date).toLocaleDateString() %></td>
                                <td><%= transaction.type %></td>
                                <td>$<%= parseFloat(transaction.amount).toFixed(2) %></td>
                                <td><%= transaction.description %></td>
                            </tr>
                        <% }); %>
                    <% } %>
                </tbody>
            </table>
        </div>
    </div>
</div>
